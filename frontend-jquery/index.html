<!DOCTYPE html>
<html lang="en">
<head>
    <title>Admin Flow</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="style.css">
    <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/tabulator/3.4.2/css/tabulator.min.css" rel="stylesheet">-->
    <link href="libs/tabulator/tabulator.min.css" rel="stylesheet">
</head>
<body>
<!-- DOM section -->
<h2>Admin Flow creating Pipelines</h2>
<div id="main-div">
    <h3>Pipeline</h3>
    <div class="bordered">
        <label>Pipeline Name</label>
        <select id="sel-pipeline"></select>
        <button id="btn_get_pipelines">Refresh</button>
        <br/>
        <button id="btn_apply_pipeline">Apply Pipeline</button>
        <br/>
        <input id="input_new_pipeline" type="text" value=""/>
        <button id="btn_save_pipeline">Save Pipeline</button>
        <br/>
        <button id="btn_reset_pipeline">Reset Pipeline</button>
    </div>

    <h3>Helper File</h3>
    <div id="input-box" class="bordered">
        <form id="fileinfo" class="bordered"
              method="post"
              enctype="multipart/form-data">
            <input name="title" type="text" value="Sample PDF">
            <input name="institute_name" type="text" value="Etrade">
            <input name="document_type" type="text" value="ContractNote">
            <input name="password" type="text" value="">
            <input name="remark" type="text" value="No Remark">
            <input id="input_file" name="file" type="file" id="image">
            <input type="submit">
        </form>

        <div id="file-input" class="bordered">
            <span>File ID</span>
            <input id="input_file_id" type="text" name="file_id" value=""/>
            <button id="btn_documentize">Documentize File</button>
            <!-- <button id="btn_load_file">Load File</button>-->
        </div>
        <div id="document-input" class="bordered">
            <span>Document ID</span>
            <input id="input_document_id" type="text" name="document_id" value=""/>
            <button id="btn_get_text">Get Text</button>
            <!-- <button id="btn_load_file">Load File</button>-->
        </div>

    </div>

    <div id="document-info">

        <h3>Extractor</h3>
        <label>Extractor Name</label>
        <select id="sel-extractor"></select>
        <button id="btn_get_extractors">Refresh</button>
        <br/>
        <input id="input_new_extractor" type="text" value=""/>
        <button id="btn_save_extractor">Save Extractor</button>
        <br/>
        <br/>
        <button id="btn_apply_extractor">Apply Extractor</button>
        <br/>
        <br/>
        <label>Extractor Type</label>
        <select id="sel-extractor-type">
            <option value="excel">Excel</option>
            <option value="regex" selected>Regular Expression</option>
            <option value="database">Database</option>
        </select>
        <br/>
        <br/>

        <div id="extractor-regex-box" class="bordered">
            <p id="document-text-url">Url for regex create</p>
            <textarea id="document-text"
                      class="bordered scrollable" readonly>
            </textarea>
            <button id="btn_create_regex">Create Regex</button>
            <button id="btn_reset_text">Reset Text</button>

            <p id="document-create_regex-url">Url for regex apply</p>
            <textarea id="regex-text"
                      class="bordered scrollable">
            </textarea>
            <button id="btn_apply_regex">Apply Regex</button>
            <button id="btn_reset_regex">Reset Regex</button>
        </div>

        <!--
        <div id="regex-transactions-table"></div>
        -->

        <!-- Raw Table -->
        <p id="document-transactions-dataframe-url">Url for transactions-dataframe</p>
        <div id="document-dataframe" class="bordered scrollable"></div>
        <div>
            <button id="btn_download_excel">Download Excel</button>
        </div>
        <p id="document-transactions-json-url">Url for transactions-json</p>
        <div id="document-transactions-table"></div>
        <br/>
    </div>

    <!-- Mapper -->
    <div>
        <h3>Mapper</h3>
        <label>Mapper Name</label>
        <select id="sel-mapper"></select>
        <button id="btn_get_mappers">Refresh</button>
        <br/>
        <input id="input_new_mapper" type="text" value=""/>
        <button id="btn_save_mapper">Save Mapper</button>
        <br/>
        <br/>
        <button id="btn_apply_mapper">Apply Mapper</button>

        <div class="bordered">
            <button id="btn_create_mapper">Create Mapper</button>
            <div id="document-mapper-table"></div>
            <div>
                <button id="btn_upload_mapper">Upload Mapper</button>
                <button id="btn_download_mapper">Download Mapper</button>
            </div>
            <button id="btn_mapper_newfields_add_row">Add Row</button>
            <div id="document-mapper-newfields-table"></div>
            <div>
                <button id="btn_upload_newfields_table">Upload NewFields Table</button>
                <button id="btn_download_newfields_table">Download NewFields Table</button>
            </div>
        </div>

        <div class="bordered">
            <!- Destination Table>
            <h3>Destination Schema</h3>
            <label>Schema Name</label>
            <select id="sel-destination-schema"></select>
            <button id="btn_get_schema_list">Refresh</button><br/>
            <input id="input_new_schema" type="text" value=""/>
            <button id="btn_save_schema">Save Schema</button><br/>
            <button id="btn_add_schema_field">Add Field</button>
            <div id="destination-header-table"></div>
        </div>
        <!-- Mapped Table -->
        <p id="document-mapped-transactions-dataframe-url">Url for mapped-transactions-dataframe</p>
        <div id="document-mapped-dataframe" class="bordered scrollable"></div>

        <p id="document-mapped-transactions-json-url">Url for mapped-transactions-json</p>
        <div id="document-mapped-transactions-table"></div>
        <div>
            <button id="btn_download_mapped_table_excel">Download Mapped Excel</button>
        </div>
    </div>


    <h3>Loader</h3>
    <!-- Loader Block -->
    <label>Loader Name</label>
    <select id="sel-loader"></select>
    <button id="btn_get_loaders">Refresh</button>
    <br/>
    <input id="input_new_loader" type="text" value=""/>
    <button id="btn_save_loader">Save Loader</button>
    <br/>
    <br/>
    <button id="btn_apply_loader">Apply Loader</button>

    <div id="database-info" class="bordered">


        <label>Table</label>
        <input id="input_datastore_table" />

        <label>Datastore</label>
        <select id="sel-datastore"></select>
        <button id="btn_get_datastores">Refresh</button>


    </div>

    <h3>Datastore</h3>
    <input id="input_new_datastore" type="text" value=""/><br/>
    <button id="btn_save_datastore">Save Datastore</button>
    <!-- Datastore Block -->
    <div class="bordered">
        <!--<button id="btn_datastore_get_tables">Datastore Get Tables</button>-->

        <label>Datastore Type</label>
        <select id="sel-datastore-type"></select>
        <button id="btn_get_datastore_type_list">Refresh Datastore Types</button>

        <div id="account-parameters-value-table"></div>
        <div>
            <button id="btn_upload_datastore">Upload Datastore</button>
            <button id="btn_download_datastore">Download Datastore</button>
        </div>

        <h4>Datastore Type</h4>
        <div id="account-parameters-description-table"></div>
    </div>

    <h3>Final Table</h3>
    <button id="btn_get_final_table">Refresh</button>
    <div id="final-table"></div>

</div>

<!-- scripts section -->

<!-- jquery is required for tabulator.js -->
<!--
<script   src="http://code.jquery.com/jquery-3.3.1.min.js"   integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="   crossorigin="anonymous"></script>
<script   src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"   integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="   crossorigin="anonymous"></script>
-->
<script type="text/javascript" src="libs/jquery/jquery-3.4.1.min.js"/>
<script type="text/javascript" src="libs/jquery-ui/jquery-ui.min.js"/>
<!-- moment.js is required for sorting tabulator table based on date -->
<script type="text/javascript" src="libs/moment-2.24.0.min.js"></script>

<!-- tabulator library is for displaying json array in tabular fashion -->
<link href="libs/tabulator-4.2.7.min.css" rel="stylesheet">
<script type="text/javascript" src="libs/tabulator-4.2.7.min.js"></script>

<!-- Main code which uses js libraries:
    i) Fetch document transactions using API
    ii) Display transactions received as json array in a table format using tabulator
-->
<script type="text/javascript" src="sample_json_data.js"></script>
<script type="text/javascript" src="common.js"></script>
<script type="text/javascript" src="main.js"></script>
</body>
</html>
